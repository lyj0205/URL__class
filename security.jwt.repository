'''

import java.util.Optional;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;

import com.example.noticeboard.security.jwt.domain.RefreshToken;

public interface RefreshTokenRepository extends JpaRepository<RefreshToken, Long> {
	   Optional<RefreshToken> findByToken(String token);

	   @Query(value = "SELECT p from RefreshToken p where p.keyEmail = :userEmail")
	   Optional<RefreshToken> existsByKeyEmail(@Param("userEmail") String userEmail);

	   void deleteByKeyEmail(String userEmail);
}

`RefreshTokenRepository` ì¸í„°í˜ì´ìŠ¤ëŠ” **JPAë¥¼ ì´ìš©í•´ `RefreshToken` ì—”í‹°í‹°ì— ì ‘ê·¼í•˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ë ˆí¬ì§€í† ë¦¬** ì—­í• ì„ í•©ë‹ˆë‹¤.

---

### âœ… ì¸í„°í˜ì´ìŠ¤ ê°œìš”

```java
public interface RefreshTokenRepository extends JpaRepository<RefreshToken, Long> { ... }
```

* `JpaRepository<RefreshToken, Long>`ë¥¼ ìƒì†í•˜ì—¬ ê¸°ë³¸ CRUD ê¸°ëŠ¥ê³¼ í˜ì´ì§•, ì •ë ¬ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* `RefreshToken` ì—”í‹°í‹°ë¥¼ `tokenId(Long)`ë¥¼ ê¸°ë³¸ í‚¤ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.

---

### âœ… ì£¼ìš” ë©”ì„œë“œ ê¸°ëŠ¥

#### 1. `Optional<RefreshToken> findByToken(String token)`

* **ê¸°ëŠ¥**: DBì—ì„œ ë¦¬í”„ë ˆì‹œ í† í° ê°’(`token` í•„ë“œ)ìœ¼ë¡œ í•´ë‹¹ í† í° ì •ë³´ë¥¼ ì°¾ìŠµë‹ˆë‹¤.
* **ë°˜í™˜**: í† í°ì´ ì¡´ì¬í•˜ë©´ `Optional` ì•ˆì— `RefreshToken` ê°ì²´ë¥¼, ì—†ìœ¼ë©´ ë¹ˆ `Optional` ë°˜í™˜.

---

#### 2. `Optional<RefreshToken> existsByKeyEmail(@Param("userEmail") String userEmail)`

* **ê¸°ëŠ¥**: `keyEmail` ì»¬ëŸ¼ì— íŠ¹ì • ì´ë©”ì¼(`userEmail`)ì´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ì»¤ìŠ¤í…€ ì¿¼ë¦¬ì…ë‹ˆë‹¤.
* **JPQL ì‚¬ìš©**: `"SELECT p from RefreshToken p where p.keyEmail = :userEmail"`

  * `p`ëŠ” `RefreshToken` ì—”í‹°í‹°ì˜ ë³„ì¹­ì…ë‹ˆë‹¤.
* **ë°˜í™˜**: í•´ë‹¹ ì´ë©”ì¼ì— ì—°ê²°ëœ ë¦¬í”„ë ˆì‹œ í† í°ì´ ìˆìœ¼ë©´ `Optional`ì— ë‹´ì•„ ë°˜í™˜, ì—†ìœ¼ë©´ ë¹ˆ ê°’ ë°˜í™˜.

---

#### 3. `void deleteByKeyEmail(String userEmail)`

* **ê¸°ëŠ¥**: íŠ¹ì • ì´ë©”ì¼(`keyEmail`)ì— í•´ë‹¹í•˜ëŠ” ë¦¬í”„ë ˆì‹œ í† í°ì„ ì‚­ì œí•©ë‹ˆë‹¤.
* ì´ë©”ì¼ì— í•´ë‹¹í•˜ëŠ” í† í°ì„ DBì—ì„œ ì œê±°í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

---

### âœ¨ ìš”ì•½

| ë©”ì„œë“œ ì´ë¦„                     | ê¸°ëŠ¥ ì„¤ëª…                               |
| -------------------------- | ----------------------------------- |
| `findByToken(String)`      | í† í° ê°’ì„ ì´ìš©í•´ `RefreshToken` ì¡°íšŒ         |
| `existsByKeyEmail(String)` | ì´ë©”ì¼ë¡œ ë¦¬í”„ë ˆì‹œ í† í° ì¡´ì¬ ì—¬ë¶€ í™•ì¸ (Optional ë°˜í™˜) |
| `deleteByKeyEmail(String)` | ì´ë©”ì¼ë¡œ ë¦¬í”„ë ˆì‹œ í† í° ì‚­ì œ                     |

---

### ğŸ’¡ ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ

```java
// í† í° ì¡°íšŒ
Optional<RefreshToken> refreshToken = refreshTokenRepository.findByToken(tokenString);

// ì´ë©”ì¼ë¡œ í† í° ì¡´ì¬ ì—¬ë¶€ í™•ì¸
Optional<RefreshToken> tokenByEmail = refreshTokenRepository.existsByKeyEmail(userEmail);

// ì´ë©”ì¼ë¡œ í† í° ì‚­ì œ
refreshTokenRepository.deleteByKeyEmail(userEmail);
```

'''
